(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/yimiao/add-or-update"],{"30f3":function(e,t,i){"use strict";var n=i("8f45"),r=i.n(n);r.a},4267:function(e,t,i){"use strict";i.r(t);var n=i("452b"),r=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},"452b":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,i,n,r,a,o){try{var u=e[a](o),c=u.value}catch(s){return void i(s)}u.done?t(c):Promise.resolve(c).then(n,r)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function u(e){a(o,n,r,u,c,"next",e)}function c(e){a(o,n,r,u,c,"throw",e)}u(void 0)}))}}var u=function(){Promise.all([i.e("common/vendor"),i.e("components/w-picker/w-picker")]).then(function(){return resolve(i("b7aa"))}.bind(null,i)).catch(i.oe)},c={data:function(){return{cross:"",ro:{yimiaoName:!1,yimiaoTypes:!1,yimiaoPhoto:!1,yimiaoKucunNumber:!1,yimiaoNewMoney:!1,yimiaoRenqun:!1,yimiaoText:!1,yimiaoContent:!1,yimiaoDelete:!1,createTime:!1},ruleForm:{yimiaoName:"",yimiaoTypes:"",yimiaoValue:"",yimiaoPhoto:"",yimiaoKucunNumber:"",yimiaoNewMoney:"",yimiaoRenqun:"",yimiaoText:"",yimiaoContent:"",yimiaoDelete:"",createTime:""},user:{},yimiaoTypesOptions:[],yimiaoTypesIndex:0}},components:{wPicker:u},computed:{baseUrl:function(){return this.$base.url}},onLoad:function(e){var t=this;return o(n.default.mark((function i(){var r,a,o;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r={page:1,limit:100,dicCode:"yimiao_types"},i.next=3,t.$api.page("dictionary",r);case 3:if(a=i.sent,t.yimiaoTypesOptions=a.data.list,!e.id){i.next=11;break}return t.ruleForm.id=e.id,i.next=9,t.$api.info("yimiao",t.ruleForm.id);case 9:o=i.sent,t.ruleForm=o.data;case 11:e.yimiaoId&&(t.ruleForm.yimiaoId=e.yimiaoId);case 12:case"end":return i.stop()}}),i)})))()},methods:{yimiaoTypesChange:function(e){this.yimiaoTypesIndex=e.target.value,this.ruleForm.yimiaoValue=this.yimiaoTypesOptions[this.yimiaoTypesIndex].indexName,this.ruleForm.yimiaoTypes=this.yimiaoTypesOptions[this.yimiaoTypesIndex].codeIndex},yimiaoPhotoTap:function(){var e=this;this.$api.upload((function(t){e.ruleForm.yimiaoPhoto=e.$base.url+"upload/"+t.file,e.$forceUpdate(),e.$nextTick((function(){}))}))},createTimeConfirm:function(e){console.log(e),this.ruleForm.createTime=e.result,this.$forceUpdate()},getUUID:function(){return(new Date).getTime()},onSubmitTap:function(){var t=this;return o(n.default.mark((function i(){return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.ruleForm.yimiaoName){i.next=3;break}return t.$utils.msg("疫苗名称不能为空"),i.abrupt("return");case 3:if(t.ruleForm.yimiaoPhoto){i.next=6;break}return t.$utils.msg("疫苗图片不能为空"),i.abrupt("return");case 6:if(t.ruleForm.yimiaoKucunNumber||t.$validate.isIntNumer(t.ruleForm.yimiaoKucunNumber)||!(t.ruleForm.yimiaoKucunNumber>0)){i.next=9;break}return t.$utils.msg("剩余数量不能为空，不能小于0 格式为数字"),i.abrupt("return");case 9:if(t.ruleForm.yimiaoRenqun){i.next=12;break}return t.$utils.msg("适宜接种人群不能为空"),i.abrupt("return");case 12:if(t.ruleForm.yimiaoText){i.next=15;break}return t.$utils.msg("接种前后禁忌不能为空"),i.abrupt("return");case 15:if(!t.ruleForm.id){i.next=20;break}return i.next=18,t.$api.update("yimiao",t.ruleForm);case 18:i.next=22;break;case 20:return i.next=22,t.$api.save("yimiao",t.ruleForm);case 22:e.setStorageSync("pingluenStateState",!0),t.$utils.msgBack("提交成功");case 24:case"end":return i.stop()}}),i)})))()},getDate:function(e){var t=new Date,i=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return"start"===e?i-=60:"end"===e&&(i+=2),n=n>9?n:"0"+n,r=r>9?r:"0"+r,"".concat(i,"-").concat(n,"-").concat(r)},toggleTab:function(e){this.$refs[e].show()}}};t.default=c}).call(this,i("543d")["default"])},"8f45":function(e,t,i){},c791:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var n={wPicker:function(){return Promise.all([i.e("common/vendor"),i.e("components/w-picker/w-picker")]).then(i.bind(null,"b7aa"))}},r=function(){var e=this,t=e.$createElement;e._self._c},a=[]},d987:function(e,t,i){"use strict";i.r(t);var n=i("c791"),r=i("4267");for(var a in r)"default"!==a&&function(e){i.d(t,e,(function(){return r[e]}))}(a);i("30f3");var o,u=i("f0c5"),c=Object(u["a"])(r["default"],n["b"],n["c"],!1,null,"5d88e443",null,!1,n["a"],o);t["default"]=c.exports},f549:function(e,t,i){"use strict";(function(e){i("48e8");n(i("66fd"));var t=n(i("d987"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i("543d")["createPage"])}},[["f549","common/runtime","common/vendor"]]]);